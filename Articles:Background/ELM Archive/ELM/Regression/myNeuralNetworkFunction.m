function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Jan-2016 22:16:20.
% 
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 50xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [0;-1;-4394;-64257;-3353;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;-3333;0;0;0;0;0;0;0;0;0;0;0;0;0;-1252;0;0;0;0];
  x1_step1_gain = [8.5094795602301e-06;1.00082568118698e-05;1.30507412821048e-05;8.45995059388853e-06;1.85928900788339e-05;2.04081632653061e-05;2.00166137894452e-05;2.0461823353079e-05;2.04524072483331e-05;2.55284386806903e-05;2.12904118630175e-05;2.10424426067378e-05;2.7074223985055e-05;1.42283941834325e-05;3.91834175776811e-05;3.92603352832633e-05;3.97535281256211e-05;4.66200466200466e-05;1.08276082354788e-05;1.25117297466375e-05;3.37986277757123e-05;7.32112657495735e-06;4.71698113207547e-05;6.98592336442069e-05;1.3825044067328e-05;5.33333333333333e-06;6.66933440042684e-05;1.34142660719675e-05;6.11265625477551e-05;4.22502482202083e-05;3.52094079538053e-05;6.09180347841979e-05;6.10183970467096e-05;3.38960070503695e-05;3.38960070503695e-05;4.47858118548044e-05;2.56775667937706e-05;4.97092011731372e-05;2.56775667937706e-05;2.56775667937706e-05;1.00035012254289e-05;9.19497954117052e-05;5.8465855940131e-05;2.98275964922747e-05;6.04924082027706e-05;4.84824978182876e-05;8.28569061231254e-05;3.82709198415584e-05;2.99886043303545e-05;3.10419221158174e-05];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-0.058417983976296605775;-0.03228557793538923415;-0.01332144699308196803;-0.037592849916786026665;-0.21158156702431346607];
  IW1_1 = [0.083678754210415998149 0.10773647688525303523 -0.0045613237032187808895 -0.18865754695402756069 -0.022320136599865945948 0.028537740610444135153 0.085422646518577768915 0.019391845095266951882 -0.0047732159016323416276 0.019572814265336899164 0.026238195430763631977 0.067795765711507763318 0.050545792758820991264 0.056221401269038469295 -0.084185116416231317582 -0.099203806936672994654 -0.10818182852766304591 0.01668332704032613259 -0.011402417860590007004 -0.0080544805005830118205 -0.02223859675487524154 -0.085432912014615045027 -0.047823156015240599059 -0.039958762465889086091 -0.02879680435869373667 0.16276345908157080489 0.051286501909014424461 0.015145390371511987734 0.023082012222033713306 -0.077716333765602066408 0.1258905350111592103 -0.0048761862760269194389 -0.0089338764663245834319 -0.074117544735374255027 -0.070410447580647683719 -0.095657497491968987435 -0.026391010231467948444 -0.10886885019878908554 0.00081950696330327147104 0.026891976835239254223 -0.011023083021138425572 0.051785541450087485549 0.04169067971404312456 -0.023752321151734021032 0.071435628374574594579 -0.006200654125846661105 0.037544480280667903715 0.0058914690444558728832 -0.11946327976973339369 0.070764974513024103686;-0.0087112163169152084102 -0.13094635376326596576 -0.049951056410424368726 0.59528622753378723775 0.069918303982601404112 -0.066582950011572245019 0.033235826013644297061 -0.015709549991414169245 -0.032650415948968641855 0.050055999760048118519 -0.059208491724191493477 0.040357410942843389978 0.025548241472284731468 0.017453930615837158491 -0.10130821890218165426 -0.089773574496831543001 -0.10049104330929770068 0.0099947492255078526635 0.0065633527866913368015 -0.0046572738440142829111 -0.053937855384035955641 0.011296992611790632535 -0.071289998700011403265 0.033610379160595428572 -0.041240269689828516764 0.21587376773164324018 0.019904897198430464289 0.040063870934180637051 -0.0077710954009582305924 -0.022186548866692839405 -0.062531736610756630257 0.046075279229536435233 -0.0658701937188850839 -0.014117287076269260937 -0.021870786169294078455 -0.058779091621327911321 -0.0067048154781450437778 -0.097650206714229192961 -0.023181878286715813797 -0.035301273986837029828 0.0060059585833974115862 -0.046041944616135636881 -0.046049242205054699562 -0.016865955726907848333 0.014590751442276429783 -0.0017300196426345924167 0.043150740929837311244 -0.078120571123179632922 -0.125016257634845529 -0.037219679939887277687;0.056480598897169914663 -0.028615219368115375753 -0.00042583917874608576311 -0.26924859523850414034 -0.018765971136386370294 -0.031978422266486915271 0.026164751041939059845 -0.041117476922779540305 -0.069292300225162029026 -0.016230675697346465258 -0.020779427671744316042 -0.01628226111229180012 -0.015690085383368020805 -0.0301189644703404244 -0.034702830829112615851 -0.041576982559291389419 -0.013860045204110910122 -0.026425111380931641525 0.023420954822201550671 0.010415697265585202938 -0.071716090392192871628 0.013436641758597725471 0.029502505578592234936 0.058092210700890191399 0.04691475210053858147 -0.033317355648083225861 0.031047891678049947123 0.0039362607215501655561 -0.10072284707814460614 0.030836056028351738201 -0.19311933320990476437 0.026720778120349675255 0.039018094929004300264 0.011164112003986549279 0.01925468285570313548 -0.026561883842557039437 0.0028087957579491199152 0.010385321988043132863 0.01485469365459875582 0.036271073720362700943 -0.003292336386505426496 0.021247536137055544891 -0.026391490699448776763 0.051513768906869594755 0.029623991593431188429 -0.00057985719195183184523 0.014679891659096866094 -0.074625838434622920881 0.0011101599005330802829 -0.026130897440545277494;0.06267742538499170013 -0.18834444976518321946 -0.056065669295988142251 -0.17608280884894000895 0.12262228086515412906 -0.015743465594955957654 0.033433059018592767297 -0.030966656497569553658 -0.059855271866248047075 0.04786604299155855502 0.0049681673431812584801 0.039248421525685805999 -0.011112282708011369387 -0.01575480206411744577 0.029083639122176992153 0.015164907015309222679 0.018211194822473207588 0.0071516424149574977717 0.069497606628651689697 -0.0045908987770667810877 -0.017561710687932538533 0.09420333320812293576 -0.043712991404691946273 0.0017777595004547608153 -0.053276486567313707798 0.1029479705502389375 0.045582389382124374744 0.031527199197058312918 0.055751066131025574235 0.021254177470101196651 -0.0064905963228902114823 -0.012341488695554066884 -0.071249555385613741465 0.015009383960868512634 0.0079226826015971613115 0.038267630308158377683 -0.069781775553027655667 -0.031070588853538739366 -0.046133627741013462364 -0.028350880198853956049 0.02153122722208356335 -0.020881791795697615677 -0.083623394517432919626 -0.060147357359019062994 0.06505173065217804973 0.0044179580092873985825 0.040031780195599095395 0.055481275827858278493 -0.013685645525733113048 -0.1375226368760250617;0.16233303289136200021 -0.055512428969389696065 -0.050969944775959771799 0.54107644172164470753 0.066992343377765939394 -0.036188183456252742687 0.083441474366158327469 -0.055069387388057340627 -0.025654573755509915006 0.074665680696075861777 -0.028373372378269270944 0.084487277608634031578 0.016061605020456126008 0.0031769259793554588574 -0.02146744008988102706 -0.019693026102717673537 -0.029167344233640455503 -0.0095033180230413259737 0.035454595790675287603 -0.00052234528745962350172 -0.15254089673292492435 0.024696693796384956709 -0.038959051779312588171 -0.0173231812336652434 -0.023210738346695004158 0.17542326023480872554 0.14143046116879318119 0.04161077870489438002 -0.0083883213172676451136 -0.027566715432350764881 -0.087036375580913219463 -0.087080711272247923738 0.014744571213986890426 0.0042366850003372142144 0.0069154487792943142299 -0.071736392536500812045 -0.025287421438337887719 0.074860668195261700908 -0.02688898991378496986 -0.029610036192496278634 0.0064605567640825074457 0.19046758151652570801 -0.06246466091373154006 -0.027995216012335850941 0.17159650530964534743 -0.0018850210664578838631 0.071255524301972156254 0.059279538228639079567 -0.080423006924381354454 -0.082915083208243187118];
  
  % Layer 2
  b2 = 0.0089450179506327404805;
  LW2_1 = [-0.75947095647880813463 0.76723427119296883081 -0.8128076208952534909 -0.76896490059538491479 0.74834332462782160444];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = 8.45995059388853e-06;
  y1_step1_xoffset = -64257;
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = repmat(b2,1,Q) + LW2_1*a1;
  
  % Output 1
  y1 = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
